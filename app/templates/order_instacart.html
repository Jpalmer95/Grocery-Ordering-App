{% extends "base.html" %}

{% block title %}Order with InstaCart - My Recipe App{% endblock %}

{% block content %}
    <h1>Order with InstaCart (Simulated)</h1>

    {% if ingredients and ingredients|length > 0 %}
        <p>For each ingredient below, click the button to simulate finding it on InstaCart.</p>
        <ul class="list-group" style="margin-top: 20px; margin-bottom: 20px;">
            {% for ingredient in ingredients %}
                <li class="list-group-item instacart-item">
                    <span>{{ ingredient }}</span>
                    <button class="btn btn-info btn-sm instacart-find-btn" data-ingredient="{{ ingredient }}">Find on InstaCart</button>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No ingredients were sent to order. Please <a href="{{ url_for('recipes') }}">generate a grocery list</a> first.</p>
    {% endif %}

    <a href="{{ url_for('grocery_list') }}" class="btn btn-secondary">Back to Grocery List</a>

    <script>
        // Optional: Add a little JS to simulate the button click
        document.querySelectorAll('.instacart-find-btn').forEach(button => {
            button.addEventListener('click', function() {
                const ingredient = this.dataset.ingredient;
                alert('Simulating search for "' + ingredient + '" on InstaCart...');
                // In a real scenario, this would redirect to InstaCart or open a modal
            });
        });
    </script>
{% endblock %}
